<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Finanzielle Souver√§nit√§t ‚Äì Deine Landingpage</title>
  <style>
    /* Hintergrundvideo */
    #bg-video {position:fixed; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:-2;}
    #overlay {position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.4); z-index:-1;}

    /* Schwebende Bl√∂cke */
    .floating {position:relative; margin:40px auto; max-width:900px; background:rgba(15,15,25,.8); color:#fff;
               padding:24px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,.6);}
    h1,h2 {margin:0 0 12px; font-family:Montserrat, sans-serif;}
    button {background:#d4af37; border:none; padding:10px 20px; border-radius:8px; font-weight:600; cursor:pointer;}
  </style>
</head>
<body>
  <!-- Hintergrund -->
  <video id="bg-video" autoplay muted loop>
    <source src="assets/video/adler-hero.mp4" type="video/mp4">
  </video>
  <div id="overlay"></div>

  <!-- Setup/Live wird hier geladen -->
  <main id="app"></main>

  <script>
    async function initLP(){
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get("id");
      if(!id){ document.getElementById("app").innerHTML="<p>‚ö†Ô∏è Keine ID √ºbergeben!</p>"; return; }

      // emails.json laden
      const res = await fetch("data/emails.json");
      const data = await res.json();
      const entry = data[id];

      if(!entry || entry.mode === "setup"){
        // Setup-Modus
        document.getElementById("app").innerHTML = `
          <div class="floating">
            <h1>Willkommen!</h1>
            <p>Bitte trage deine E-Mail ein, um deine pers√∂nliche Landingpage zu aktivieren:</p>
            <input id="emailInput" type="email" placeholder="deine@mail.de" style="padding:8px; width:80%">
            <button onclick="activateLP('${id}')">‚úÖ Best√§tigen</button>
          </div>
        `;
      } else {
        // Live-Modus
        renderLive(entry.email);
      }
    }

    function renderLive(email){
      document.getElementById("app").innerHTML = `
        <div class="floating">
          <h1>Finanzielle Souver√§nit√§t beginnt hier</h1>
          <p>30 Tage. Klarer Plan. Konkrete Schritte.</p>
          <button onclick="window.location.href='mailto:${email}'">Jetzt starten</button>
        </div>

        <div class="floating">
          <h2>Dein Nutzen</h2>
          <ul>
            <li>üõ°Ô∏è Sicherheit ‚Äì Peer-to-Peer, volle Kontrolle</li>
            <li>üåê Netzwerk & Duplizierung ‚Äì gemeinsam wachsen</li>
            <li>üí∞ Einkommen & Unabh√§ngigkeit ‚Äì planbar & nachhaltig</li>
          </ul>
        </div>

        <div class="floating">
          <h2>Kontakt</h2>
          <p>Fragen? Melde dich direkt bei: <b>${email}</b></p>
        </div>
      `;
    }

    function activateLP(id){
      const email = document.getElementById("emailInput").value.trim();
      if(!email) return alert("Bitte eine g√ºltige E-Mail eintragen!");
      // Hier nur VISUELL umschalten ‚Äì Admin muss sp√§ter emails.json anpassen!
      renderLive(email);
      alert("‚úÖ Deine LP ist jetzt aktiv. Bitte diesen Link sofort kopieren & teilen!");
    }

    initLP();
  </script>
</body>
</html>
